# Shell Sort - シェルソート

## 概要
シェルソートは、挿入ソートの改良版です。離れた要素同士を比較・交換することで、データを大まかにソートしてから、最後に挿入ソートで仕上げます。

## アルゴリズムの動き
```
[3, 22, 19, 5, 6, 83] の場合（gap = 3 → 1）

gap = 3（3つ離れた要素を比較）:
  [3, 22, 19, 5, 6, 83]
   ↓   ↓
  [3, 5, 19, 22, 6, 83]  ← 3と5、22と22、19と6を比較

gap = 1（通常の挿入ソート）:
  [3, 5, 6, 19, 22, 83]  ← ほぼ整列済みなので高速
```

gapを徐々に小さくすることで効率的にソートします。

## コードの解説

### gap（間隔）の設定（main.cpp:12）
```cpp
for (size_t gap = size / 2; gap > 0; gap /= 2)
```
- 最初のgapは配列サイズの半分
- 各反復でgapを半分にする（Shellの元の方法）
- gap = 1になるまで繰り返す

### gap間隔の挿入ソート（main.cpp:14-26）
```cpp
for (size_t i{gap}; i < size; ++i)
{
    int tmp = nums[i];  // 挿入する値を保存
    size_t j = i;

    while (j >= gap && nums[j - gap] > tmp)
    {
        nums[j] = nums[j - gap];  // gap分だけ離れた要素をシフト
        j -= gap;
    }
    nums[j] = tmp;  // 適切な位置に挿入
}
```
- gap間隔で挿入ソートを実行
- 通常の挿入ソートの「1つ左」が「gap個左」になっただけ
- gap = 1のとき、通常の挿入ソートと同じ

## なぜ速いのか

### 通常の挿入ソート
```
[5, 4, 3, 2, 1] → 5を1つずつ右へ移動（4回の比較・移動）
```

### シェルソート
```
gap = 2: [3, 2, 5, 4, 1]  ← 大まかに整列
gap = 1: [1, 2, 3, 4, 5]  ← 少ない移動で完了
```

大きなgapで大まかに整列させることで、最終的な挿入ソート（gap = 1）の移動回数が大幅に減ります。

## 計算量
- **時間計算量**:
  - 最良: O(n log n)
  - 平均: O(n^1.5) または O(n log² n)（gap列による）
  - 最悪: O(n²)（gap列による）
- **空間計算量**: O(1)

## 特徴
- **高速**: 単純なソートの中では速い
- **不安定ソート**: 同じ値の順序が保たれない場合がある
- **実装が簡単**: バブルソートより速く、実装も簡単

## gap列の選択
このコードでは`gap /= 2`（シェル列）を使用していますが、他にも：
- **Knuthの列**: gap = (gap - 1) / 3
- **Hibbardの列**: 2^k - 1
- **Sedgewickの列**: より複雑だが効率的

gap列の選択でパフォーマンスが大きく変わります。

## 使いどころ
- 中規模データのソート（数千〜数万要素）
- クイックソートやマージソートが実装できない環境
- 組み込みシステム（メモリが少ない環境）
- データがある程度整列済みの場合
